var ClientAutoUpdater={initialize:function(e){this.latestStoredClientVersionLSKey=e.localStorageClientVersionKey;this.currentClientVersion=this.getStoredClientVersion()},setMonitor:function(e){if(typeof e==="undefined")e={};$.extend(e,{localStorageClientVersionKey:"latest_stored_client_version"});this.initialize(e);this.setAjaxPrefilter()},setAjaxPrefilter:function(){var e=this;$.ajaxPrefilter(function(t,n,r){if(!n.isInternetCheck){n._success=n.success;t.success=function(t,r,i){var s=i.getResponseHeader("Application-Version");if(s&&e.shouldReloadOrUpdateStoredVersion(s)){e.reloadPage()}if(n._success)n._success(t,r,i);return}}})},hasInternet:function(){var e=$.ajax({isInternetCheck:true,type:"HEAD",url:window.location.href.split("?")[0]+"?"+Math.random(),async:false}).status;console.log("Internet status: "+e);return e>=200&&e<300||e===304},getStoredClientVersion:function(){try{return localStorage.getItem(this.latestStoredClientVersionLSKey)}catch(e){return null}},setStoredClientVersion:function(e){this.currentClientVersion=e;localStorage.setItem(this.latestStoredClientVersionLSKey,e)},shouldReloadOrUpdateStoredVersion:function(e){if(this.currentClientVersion){if(this.currentClientVersion!=e&&this.hasInternet()){this.setStoredClientVersion(e);console.log("Time to reload !");return true}else{return false}}else{this.setStoredClientVersion(e);return false}},reloadPage:function(){location.reload(true)}}